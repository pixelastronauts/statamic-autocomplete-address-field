function h(t,e,o,a,n,r,l,p){var s=typeof t=="function"?t.options:t;e&&(s.render=e,s.staticRenderFns=o,s._compiled=!0),a&&(s.functional=!0),r&&(s._scopeId="data-v-"+r);var d;if(l?(d=function(i){i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!i&&typeof __VUE_SSR_CONTEXT__<"u"&&(i=__VUE_SSR_CONTEXT__),n&&n.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(l)},s._ssrRegister=d):n&&(d=p?function(){n.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:n),d)if(s.functional){s._injectStyles=d;var f=s.render;s.render=function(m,c){return d.call(c),f(m,c)}}else{var u=s.beforeCreate;s.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:s}}const y={mixins:[Fieldtype],data(){return{displayAddress:this.value?this.value.formatted_address:"",addressObject:this.value||{},autocomplete:null}},mounted(){const e={componentRestrictions:{country:this.config.country_code.split(",").map(a=>a.trim())},fields:["address_components","geometry","formatted_address"]};var o=this.$refs.input.$el.querySelector("input");this.autocomplete=new google.maps.places.Autocomplete(o,e),this.autocomplete.addListener("place_changed",this.onPlaceChanged)},methods:{updateDebounced:_.debounce(function(t){this.displayAddress=t,this.addressObject={...this.addressObject,formatted_address:t}},500),onPlaceChanged(){const t=this.autocomplete.getPlace();if(!t.geometry){console.log("No details available for input: '"+t.name+"'");return}const e=t.address_components.reduce((a,n)=>{const r=n.types;return r.includes("street_number")?a.street_number=n.long_name:r.includes("route")?a.route=n.long_name:r.includes("locality")?a.locality=n.long_name:r.includes("administrative_area_level_1")?a.administrative_area_level_1=n.long_name:r.includes("country")?a.country=n.long_name:r.includes("postal_code")&&(a.postal_code=n.long_name),a},{}),o={street_number:e.street_number||"",route:e.route||"",locality:e.locality||"",administrative_area_level_1:e.administrative_area_level_1||"",country:e.country||"",postal_code:e.postal_code||"",formatted_address:t.formatted_address,coordinates:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}};this.displayAddress=o.formatted_address,this.addressObject=o,this.$emit("input",o)}}};var v=function(){var e=this,o=e._self._c;return o("div",[o("text-input",{ref:"input",attrs:{type:e.inputType,value:e.displayAddress},on:{input:e.updateDebounced}}),e.meta.hasKey?e._e():o("small",{staticClass:"text-red-500"},[e._v(" Google Maps key not (yet) configured ")]),o("input",{ref:"hiddenInput",attrs:{type:"hidden"},domProps:{value:JSON.stringify(e.addressObject)}})],1)},g=[],b=h(y,v,g,!1,null,null,null,null);const C=b.exports;Statamic.booting(()=>{Statamic.$components.register("address-fieldtype",C)});
