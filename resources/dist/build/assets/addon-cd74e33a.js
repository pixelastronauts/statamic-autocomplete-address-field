function h(t,e,o,r,s,a,l,f){var n=typeof t=="function"?t.options:t;e&&(n.render=e,n.staticRenderFns=o,n._compiled=!0),r&&(n.functional=!0),a&&(n._scopeId="data-v-"+a);var d;if(l?(d=function(i){i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!i&&typeof __VUE_SSR_CONTEXT__<"u"&&(i=__VUE_SSR_CONTEXT__),s&&s.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(l)},n._ssrRegister=d):s&&(d=f?function(){s.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:s),d)if(n.functional){n._injectStyles=d;var p=n.render;n.render=function(m,c){return d.call(c),p(m,c)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:n}}const y={mixins:[Fieldtype],data(){return{displayAddress:this.value?this.value.formatted_address:"",addressObject:this.value||{},autocomplete:null}},mounted(){var r;const e={componentRestrictions:{country:(r=this.config)!=null&&r.country_code&&typeof this.config.country_code=="string"?this.config.country_code.split(",").map(s=>s.trim()):[]},fields:["address_components","geometry","formatted_address"]};var o=this.$refs.input.$el.querySelector("input");this.autocomplete=new google.maps.places.Autocomplete(o,e),this.autocomplete.addListener("place_changed",this.onPlaceChanged)},methods:{updateDebounced:_.debounce(function(t){this.displayAddress=t,this.addressObject={...this.addressObject,formatted_address:t}},500),onPlaceChanged(){const t=this.autocomplete.getPlace();if(!t.geometry){console.log("No details available for input: '"+t.name+"'");return}const e=t.address_components.reduce((r,s)=>{const a=s.types;return a.includes("street_number")?r.street_number=s.long_name:a.includes("route")?r.route=s.long_name:a.includes("locality")?r.locality=s.long_name:a.includes("administrative_area_level_1")?r.administrative_area_level_1=s.long_name:a.includes("country")?r.country=s.long_name:a.includes("postal_code")&&(r.postal_code=s.long_name),r},{}),o={street_number:e.street_number||"",route:e.route||"",locality:e.locality||"",administrative_area_level_1:e.administrative_area_level_1||"",country:e.country||"",postal_code:e.postal_code||"",formatted_address:t.formatted_address,coordinates:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}};this.displayAddress=o.formatted_address,this.addressObject=o,this.$emit("input",o)}}};var g=function(){var e=this,o=e._self._c;return o("div",[o("text-input",{ref:"input",attrs:{type:e.inputType,value:e.displayAddress},on:{input:e.updateDebounced}}),e.meta.hasKey?e._e():o("small",{staticClass:"text-red-500"},[e._v(" Google Maps key not (yet) configured ")]),o("input",{ref:"hiddenInput",attrs:{type:"hidden"},domProps:{value:JSON.stringify(e.addressObject)}})],1)},v=[],b=h(y,g,v,!1,null,null,null,null);const C=b.exports;Statamic.booting(()=>{Statamic.$components.register("address-fieldtype",C)});
