function h(t,e,i,n,o,d,l,p){var s=typeof t=="function"?t.options:t;e&&(s.render=e,s.staticRenderFns=i,s._compiled=!0),n&&(s.functional=!0),d&&(s._scopeId="data-v-"+d);var a;if(l?(a=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),o&&o.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(l)},s._ssrRegister=a):o&&(a=p?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),a)if(s.functional){s._injectStyles=a;var f=s.render;s.render=function(m,u){return a.call(u),f(m,u)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,a):[a]}return{exports:t,options:s}}const g={mixins:[Fieldtype],data(){return{displayAddress:this.value?this.value.formatted_address:"",addressObject:this.value||{},autocomplete:null}},mounted(){this.meta.hasKey&&setTimeout(()=>{this.initializePlace()},500)},methods:{initializePlace(){var t;try{if(!window.google||!window.google.maps||!window.google.maps.places){console.error("Google Maps Places API not available");return}const e=(t=this.config)!=null&&t.country_code&&typeof this.config.country_code=="string"?this.config.country_code.split(",").map(n=>n.trim()):[],i=this.$refs.input.$el.querySelector("input");this.autocomplete=new google.maps.places.Autocomplete(i,{componentRestrictions:{country:e},fields:["address_components","geometry","formatted_address","place_id"]}),this.autocomplete.addListener("place_changed",this.onPlaceChanged)}catch(e){console.error("Error initializing Google Maps Places:",e)}},updateDebounced:_.debounce(function(t){if(this.displayAddress=t,!t||t.trim()===""){this.addressObject={},this.$emit("input",null);return}this.addressObject={...this.addressObject,formatted_address:t},this.$emit("input",this.addressObject)},500),onPlaceChanged(){try{const t=this.autocomplete.getPlace();if(!t||!t.geometry){console.log("No details available for input");return}const e={};t.address_components.forEach(n=>{const o=n.types;o.includes("street_number")?e.street_number=n.long_name:o.includes("route")?e.route=n.long_name:o.includes("locality")?e.locality=n.long_name:o.includes("administrative_area_level_1")?e.administrative_area_level_1=n.long_name:o.includes("country")?e.country=n.long_name:o.includes("postal_code")&&(e.postal_code=n.long_name)});const i={street_number:e.street_number||"",route:e.route||"",locality:e.locality||"",administrative_area_level_1:e.administrative_area_level_1||"",country:e.country||"",postal_code:e.postal_code||"",formatted_address:t.formatted_address,place_id:t.place_id,coordinates:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}};this.displayAddress=i.formatted_address,this.addressObject=i,this.$emit("input",i)}catch(t){console.error("Error handling place selection:",t)}}}};var y=function(){var e=this,i=e._self._c;return i("div",[i("text-input",{ref:"input",attrs:{type:e.inputType,value:e.displayAddress},on:{input:e.updateDebounced}}),e.meta.hasKey?e._e():i("small",{staticClass:"text-red-500"},[e._v(" Google Maps key not (yet) configured ")]),i("input",{ref:"hiddenInput",attrs:{type:"hidden"},domProps:{value:JSON.stringify(e.addressObject)}})],1)},v=[],b=h(g,y,v,!1,null,null,null,null);const C=b.exports;Statamic.booting(()=>{Statamic.$components.register("address-fieldtype",C)});
